<app-navbar-adm-usr></app-navbar-adm-usr>

<link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
    crossorigin="anonymous">
<form>
    <h3 style="text-align: center; margin-top: 20px;">Bienvenido!</h3>
    <h5 style="text-align: center; margin-top: 10px;">Selecciona la forma en la
        que deseas cotizar</h5>
    <div style="width: 50%; margin: 0 auto;">
        <select class="form-select" aria-label="Default select example"
            style="width: 40%; margin: 0 auto; margin-top: 10px;"
            (change)="onOptionChange($event)">
            <option value selected disabled>Seleccione una opción</option>
            <option value="1">Por sueldo</option>
            <option value="2">Precio de la casa</option>
        </select>
    </div>
</form>

<div *ngIf="selectedOption === '1'" style="width: 50%; margin: 0 auto;">
    <h5 class="textos">Cotización en base a tu sueldo</h5>
    <form>
        <div style="width: 40%; margin: 0 auto;">
            <label for="sueldo" style="font-weight: bold;">Sueldo:</label>
            <input id="suelInp" type="number" placeholder="$"
                class="form-control" [(ngModel)]="sueldo" name="sueldo" />
        </div>
        <div style="width: 40%; margin: 0 auto; margin-top: 10px;">
            <label for="banco" style="font-weight: bold;">Selecciona el Banco:</label>
            <select id="banco" class="form-select"
                (change)="onBancoSeleccionado($event)">
                <option value selected disabled>Seleccione una opción</option>
                <option *ngFor="let banco of bancos" [value]="banco.nombre">{{
                    banco.nombre }}</option>
            </select>

            <label for="anio" style="margin-top: 10px; font-weight: bold;">Selecciona los
                Años:</label>
            <select class="form-select" [(ngModel)]="anioSeleccionado"
                name="anioSeleccionado">
                <option *ngFor="let anio of anios" [value]="anio">{{ anio
                    }}</option>
            </select>

            <div style="margin-top: 5px; margin: 0 auto;"
                *ngIf="interes !== 0 && enganche !== 0">
                <p>Interés: {{ interes }}%</p>
                <p>Enganche: {{ enganche }}%</p>
            </div>
            <div style="margin-top: 10px; width:50% ; margin: 0 auto;">
                <button class="btn btn-success" type="button"
                    (click)="calcularPrestamo(anioSeleccionado)">Calcular</button>
            </div>
        </div>
    </form>
</div>
    <div *ngIf="resultadoPrestamo !== null && engancheCalculado !== null">
        <p style="text-align: center; margin-top: 10px;">Monto máximo del préstamo: {{ resultadoPrestamo | currency }}</p>
        <p style="text-align: center;">Enganche: {{ engancheCalculado | currency }}</p>
    </div>
    <div *ngIf="mensualidad !== null">
        <p style="text-align: center;">Mensualidad: {{ mensualidad | currency }}</p>
    </div>
    <div *ngIf="montoapagar !== null">
        <p style="text-align: center;">Monto a Pagar: {{ montoapagar | currency }}</p>
    </div>
    <!-- Botón para guardar los datos del préstamo calculado -->
     <div style="margin: 0 auto; width: 10%;" >
    <button class="btn btn-success"  *ngIf="resultadoPrestamo !== null && engancheCalculado !== null"
        type="button"
        (click)="guardarPrestamoSueldo()">Guardar</button>
    </div>


<!-- Formulario para opción de cotizacion casa -->
<div *ngIf="selectedOption === '2'">
    <h5 class="textos">Cotización en base valor de la casa</h5>
    <form>
        <div style="width: 30%; margin: 0 auto;">
            <label for="casa" style="text-align: center; font-weight: bold;">Costo de la casa:</label>
            <input style="width: 50%; margin: 0 auto;" id="costocasa" type="number" placeholder="$"
                class="form-control" />
        </div>
        <div style="width: 30%; margin: 0 auto; margin-top: 10px;">
            <label for="banco" style="text-align: center; font-weight: bold; margin-top: 10px;">Selecciona el Banco:</label>
            <select id="banco" class="form-select"
                (change)="onBancoSeleccionado($event)">
                <option value selected disabled>Seleccione una opción</option>
                <option *ngFor="let banco of bancos" [value]="banco.nombre">{{
                    banco.nombre }}</option>
            </select>

            <label for="anio"  style="text-align: center; font-weight: bold; margin-top: 10px;">Selecciona los Años:</label>
            <select class="form-select" [(ngModel)]="anioSeleccionado"
                name="anioSeleccionado">
                <option *ngFor="let anio of anios" [value]="anio">{{ anio
                    }}</option>
            </select>

            <div *ngIf="interes !== 0 && enganche !== 0">
                <p>Interés: {{ interes }}%</p>
                <p>Enganche: {{ enganche }}%</p>
            </div>
            <div style="margin-top: 10px; width:50% ; margin: 0 auto;">
                <button type="button" class="btn btn-success"
                (click)="calcularPrestamoCasa(anioSeleccionado)">Calcular</button>
            </div>
            
        </div>
    </form>
    <div *ngIf="resultadoPrestamo !== null && engancheCalculado !== null">
        <p style="text-align: center; margin-top: 10px;">Monto máximo del préstamo: {{ resultadoPrestamo | currency }}</p>
        <p style="text-align: center;">Enganche: {{ engancheCalculado | currency }}</p>
    </div>
    <div *ngIf="mensualidad !== null">
        <p style="text-align: center;">Mensualidad: {{ mensualidad | currency }}</p>
    </div>
    <div *ngIf="montoapagar !== null">
        <p style="text-align: center;">Monto a Pagar: {{ montoapagar | currency }}</p>
    </div>
    <!-- Botón para guardar los datos del préstamo calculado -->
    <div style="margin: 0 auto; width: 40%;" >
    <button *ngIf="resultadoPrestamo !== null && engancheCalculado !== null"
        type="button" class="btn btn-success"
        (click)="guardarPrestamoCasa()">Guardar</button>
    </div>
</div>